{"title":"Java贪吃蛇","date":"2019-11-18T12:38:09.070Z","link":"post/Java贪吃蛇","updated":"2019-11-18T12:37:31.738Z","content":"<h1 id=\"Java贪吃蛇小游戏\">Java贪吃蛇小游戏<a href=\"post/Java贪吃蛇#Java贪吃蛇小游戏\"></a></h1><p>[TOC]</p>\n<h2 id=\"1-静态页面绘制————-gt-GUI\">1. 静态页面绘制————&gt;GUI<a href=\"post/Java贪吃蛇#1-静态页面绘制————-gt-GUI\"></a></h2><h3 id=\"1-1-用JFrame绘制静态窗口\">1.1 用JFrame绘制静态窗口<a href=\"post/Java贪吃蛇#1-1-用JFrame绘制静态窗口\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.swing.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"comment\">//绘制静态窗口</span></span><br><span class=\"line\">JFrame jFrame = <span class=\"keyword\">new</span> JFrame(<span class=\"string\">\"SnakeGame\"</span>);\t<span class=\"comment\">//SnakeGame———&gt;窗口标题</span></span><br><span class=\"line\"><span class=\"comment\">/*设置界面大小</span></span><br><span class=\"line\"><span class=\"comment\">x y : 距离屏幕左上角的坐标</span></span><br><span class=\"line\"><span class=\"comment\">width height : 界面的宽和高</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">jFrame.setBounds(<span class=\"number\">10</span>,<span class=\"number\">10</span>,<span class=\"number\">905</span>,<span class=\"number\">600</span>);</span><br><span class=\"line\"><span class=\"comment\">//窗口大小设置 false——&gt;不可改变 true——&gt;可改变</span></span><br><span class=\"line\">jFrame.setResizable(<span class=\"keyword\">false</span>);</span><br><span class=\"line\"><span class=\"comment\">//设置关闭事件，游戏关闭程序就会停止。若不设置，游戏关闭程序仍旧运行</span></span><br><span class=\"line\">jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//设置窗口是否可见 true——&gt;可见 false——&gt;不可见</span></span><br><span class=\"line\">jFrame.setVisible(<span class=\"keyword\">true</span>);</span><br></pre></td></tr></table></div></figure>\n\n<p>此时静态窗口创建完成</p>\n<h3 id=\"1-2-用JPanel绘制面板\">1.2 用JPanel绘制面板<a href=\"post/Java贪吃蛇#1-2-用JPanel绘制面板\"></a></h3><p>窗口创建完成之后，游戏并不会显示在窗口上运行，需要一个面板。</p>\n<p>自定义一个面板，需要继承自JPanel。JPanel: swing中的面板容器，可以存放任何东西，最后通过JFrame的add方法可以添加到JFrame窗体中。</p>\n<p><strong>实现画板功能 需要重写父类的paintComponent方法</strong></p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.swing.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"comment\">//继承JPanel并实现面板功能需要重写父类的paintComponent方法</span></span><br><span class=\"line\"><span class=\"comment\">//JPanel:swing中的面板容器，可以存放任何东西，最后通过JFrame的add方法可以添加到JFrame窗体中</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GamePanel</span> <span class=\"keyword\">extends</span> <span class=\"title\">JPanel</span></span>&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">paintComponent</span><span class=\"params\">(Graphics g)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//Graphics g : 作画的画笔，画图片、文字都需要用到</span></span><br><span class=\"line\">        <span class=\"keyword\">super</span>.paintComponent(g);    \t<span class=\"comment\">//调用父类的方法，清屏作用</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setBackground(Color.white);<span class=\"comment\">//设置面板背景色</span></span><br><span class=\"line\">    &#125;\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"1-3-将面板添加到窗体中\">1.3 将面板添加到窗体中<a href=\"post/Java贪吃蛇#1-3-将面板添加到窗体中\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.swing.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"comment\">//绘制静态窗口</span></span><br><span class=\"line\">JFrame jFrame = <span class=\"keyword\">new</span> JFrame(<span class=\"string\">\"SnakeGame\"</span>);\t<span class=\"comment\">//SnakeGame———&gt;窗口标题</span></span><br><span class=\"line\"><span class=\"comment\">/*设置界面大小</span></span><br><span class=\"line\"><span class=\"comment\">x y : 距离屏幕左上角的坐标</span></span><br><span class=\"line\"><span class=\"comment\">width height : 界面的宽和高</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">jFrame.setBounds(<span class=\"number\">10</span>,<span class=\"number\">10</span>,<span class=\"number\">905</span>,<span class=\"number\">600</span>);</span><br><span class=\"line\"><span class=\"comment\">//窗口大小设置 false——&gt;不可改变 true——&gt;可改变</span></span><br><span class=\"line\">jFrame.setResizable(<span class=\"keyword\">false</span>);</span><br><span class=\"line\"><span class=\"comment\">//设置关闭事件，游戏关闭程序就会停止。若不设置，游戏关闭程序仍旧运行</span></span><br><span class=\"line\">jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class=\"line\"></span><br><span class=\"line\">jFrame.add(<span class=\"keyword\">new</span> GamePanel());    <span class=\"comment\">//将自定义的面板添加进JFrame窗体里  &lt;————————————添加位置</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//设置窗口是否可见 true——&gt;可见 false——&gt;不可见</span></span><br><span class=\"line\">jFrame.setVisible(<span class=\"keyword\">true</span>);</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"1-4-在GamePanel绘制头部广告栏\">1.4 在GamePanel绘制头部广告栏<a href=\"post/Java贪吃蛇#1-4-在GamePanel绘制头部广告栏\"></a></h3><h4 id=\"1-4-1-先建立一个Data类，用于存放外部数据\">1.4.1 先建立一个Data类，用于存放外部数据<a href=\"post/Java贪吃蛇#1-4-1-先建立一个Data类，用于存放外部数据\"></a></h4><ul>\n<li><p>存放图片———&gt;URL类和ImageIcon类</p>\n<p>URL:获取图片资源位置，定位图片</p>\n<p>ImageIcon:存放图片</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//用于存放程序需要的数据</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.swing.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URL;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Data</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//存放头部广告栏图片</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL headerURL = Data.class.getResource(<span class=\"string\">\"/statics/header.png\"</span>);  <span class=\"comment\">//相对路径</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon header = <span class=\"keyword\">new</span> ImageIcon(headerURL);</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//存放头部(上下左右)图片</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL upHead = Data.class.getResource(<span class=\"string\">\"/statics/up.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL downHead = Data.class.getResource(<span class=\"string\">\"/statics/down.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL leftHead = Data.class.getResource(<span class=\"string\">\"/statics/left.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL rightHead = Data.class.getResource(<span class=\"string\">\"/statics/right.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon up = <span class=\"keyword\">new</span> ImageIcon(upHead);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon down = <span class=\"keyword\">new</span> ImageIcon(downHead);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon left = <span class=\"keyword\">new</span> ImageIcon(leftHead);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon right = <span class=\"keyword\">new</span> ImageIcon(rightHead);</span><br><span class=\"line\">    <span class=\"comment\">//存放身体图片</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL bodyURL = Data.class.getResource(<span class=\"string\">\"/statics/body.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon body = <span class=\"keyword\">new</span> ImageIcon(bodyURL);</span><br><span class=\"line\">    <span class=\"comment\">//存放食物图片</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL foodURL = Data.class.getResource(<span class=\"string\">\"/statics/food.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon food = <span class=\"keyword\">new</span> ImageIcon(foodURL); </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"1-4-2-在GamePanel中绘制广告栏图片\">1.4.2 在GamePanel中绘制广告栏图片<a href=\"post/Java贪吃蛇#1-4-2-在GamePanel中绘制广告栏图片\"></a></h4><p>通过Data类取到图片，再通过paintIcon()方法绘制图片</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//绘制头部广告栏</span></span><br><span class=\"line\"><span class=\"comment\">/*通过paintIcon方法拿到图片</span></span><br><span class=\"line\"><span class=\"comment\">方法参数如下</span></span><br><span class=\"line\"><span class=\"comment\">component:画到哪个组件中</span></span><br><span class=\"line\"><span class=\"comment\">graphics:画笔</span></span><br><span class=\"line\"><span class=\"comment\">x y :画的位置</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">Data.header.paintIcon(<span class=\"keyword\">this</span>,g,<span class=\"number\">25</span>,<span class=\"number\">11</span>);\t<span class=\"comment\">//this——&gt;当前组件</span></span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"1-5-在GamePanel中绘制游戏区域-矩形\">1.5 在GamePanel中绘制游戏区域(矩形)<a href=\"post/Java贪吃蛇#1-5-在GamePanel中绘制游戏区域-矩形\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//绘制游戏区域</span></span><br><span class=\"line\"><span class=\"comment\">//x y : 距离屏幕左上角的坐标</span></span><br><span class=\"line\"><span class=\"comment\">//width height : 界面的宽和高</span></span><br><span class=\"line\">g.fillRect(<span class=\"number\">25</span>,<span class=\"number\">75</span>,<span class=\"number\">850</span>,<span class=\"number\">400</span>);\t<span class=\"comment\">//fillRect:填充一个矩形(还有别的方法)</span></span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"1-6-在GamePanel中绘制一条静态小蛇\">1.6 在GamePanel中绘制一条静态小蛇<a href=\"post/Java贪吃蛇#1-6-在GamePanel中绘制一条静态小蛇\"></a></h3><ul>\n<li>定义蛇的长度</li>\n<li>定义两个数组定位蛇的位置(x坐标,y坐标)</li>\n<li>初始化</li>\n<li>绘制静态小蛇</li>\n<li>构造器调用初始化方法</li>\n</ul>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.swing.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GamePanel</span> <span class=\"keyword\">extends</span> <span class=\"title\">JPanel</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> length; \t\t\t\t\t<span class=\"comment\">//定义蛇的长度</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] snakeX = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">600</span>];    <span class=\"comment\">//蛇的X坐标</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] snakeY = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">500</span>];    <span class=\"comment\">//蛇的Y坐标</span></span><br><span class=\"line\">    <span class=\"comment\">//初始化</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        length = <span class=\"number\">3</span>;                 <span class=\"comment\">//初始化蛇的长度，默认为3</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">0</span>] = <span class=\"number\">100</span>;   snakeY[<span class=\"number\">0</span>] = <span class=\"number\">100</span>;   <span class=\"comment\">//蛇头的坐标</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">1</span>] = <span class=\"number\">75</span>;    snakeY[<span class=\"number\">1</span>] = <span class=\"number\">100</span>;   <span class=\"comment\">//第一个蛇身的坐标</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">2</span>] = <span class=\"number\">50</span>;    snakeY[<span class=\"number\">2</span>] = <span class=\"number\">100</span>;   <span class=\"comment\">//第一个蛇身的坐标</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//构造器</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GamePanel</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        init();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//画板</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">paintComponent</span><span class=\"params\">(Graphics g)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//Graphics g : 作画的画笔，画图片、文字都需要用到</span></span><br><span class=\"line\">        <span class=\"keyword\">super</span>.paintComponent(g);    \t<span class=\"comment\">//调用父类的方法，清屏作用</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setBackground(Color.white);<span class=\"comment\">//设置面板背景色</span></span><br><span class=\"line\">        Data.header.paintIcon(<span class=\"keyword\">this</span>,g,<span class=\"number\">25</span>,<span class=\"number\">11</span>);<span class=\"comment\">//绘制头部广告栏</span></span><br><span class=\"line\">        g.fillRect(<span class=\"number\">25</span>,<span class=\"number\">75</span>,<span class=\"number\">850</span>,<span class=\"number\">400</span>);<span class=\"comment\">//绘制游戏区域</span></span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"comment\">//绘制静态小蛇</span></span><br><span class=\"line\">        <span class=\"comment\">//绘制头部</span></span><br><span class=\"line\">        Data.right.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">0</span>],snakeY[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        <span class=\"comment\">//绘制第一节身体</span></span><br><span class=\"line\">        Data.body.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">1</span>],snakeY[<span class=\"number\">1</span>]);</span><br><span class=\"line\">        <span class=\"comment\">//绘制第二节身体</span></span><br><span class=\"line\">        Data.body.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">2</span>],snakeY[<span class=\"number\">2</span>]);</span><br><span class=\"line\">    &#125;\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"1-7-在GamePanel中绘制一条静态小蛇的优化\">1.7 在GamePanel中绘制一条静态小蛇的优化<a href=\"post/Java贪吃蛇#1-7-在GamePanel中绘制一条静态小蛇的优化\"></a></h3><p><strong>添加一个新变量fx,由fx决定蛇头方向，由length决定蛇身</strong></p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GamePanel</span> <span class=\"keyword\">extends</span> <span class=\"title\">JPanel</span></span>&#123;</span><br><span class=\"line\">    .......</span><br><span class=\"line\">    String fx;      <span class=\"comment\">//蛇头方向</span></span><br><span class=\"line\">    <span class=\"comment\">//初始化</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        .......</span><br><span class=\"line\">        fx = <span class=\"string\">\"R\"</span>;\t<span class=\"comment\">//蛇头方向默认为R</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//构造器</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GamePanel</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        init();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//画板</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">paintComponent</span><span class=\"params\">(Graphics g)</span></span>&#123;</span><br><span class=\"line\">        .......</span><br><span class=\"line\">        <span class=\"comment\">//绘制静态小蛇</span></span><br><span class=\"line\">        <span class=\"comment\">//绘制头部————&gt;由fx决定</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"R\"</span>))&#123;</span><br><span class=\"line\">            Data.right.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">0</span>],snakeY[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"L\"</span>))&#123;</span><br><span class=\"line\">            Data.left.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">0</span>],snakeY[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"U\"</span>))&#123;</span><br><span class=\"line\">            Data.up.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">0</span>],snakeY[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"D\"</span>))&#123;</span><br><span class=\"line\">            Data.down.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">0</span>],snakeY[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//绘制身体————&gt;由length决定</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;length; i++) &#123;</span><br><span class=\"line\">            Data.body.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[i],snakeY[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//JPanel:swing中的面板容器，可以存放任何东西，最后添加到JFrame窗体中</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GamePanel</span> <span class=\"keyword\">extends</span> <span class=\"title\">JPanel</span> <span class=\"keyword\">implements</span> <span class=\"title\">KeyListener</span>, <span class=\"title\">ActionListener</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> score;  \t\t\t\t\t<span class=\"comment\">//定义积分</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> isStart = <span class=\"keyword\">false</span>;    \t<span class=\"comment\">//游戏是否开始(用空格键控制)，默认为false</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> isFailed = <span class=\"keyword\">false</span>;   \t<span class=\"comment\">//游戏是否失败(用空格键控制)，默认为false</span></span><br><span class=\"line\"></span><br><span class=\"line\">    Timer timer = <span class=\"keyword\">new</span> Timer(<span class=\"number\">100</span>,<span class=\"keyword\">this</span>);      <span class=\"comment\">//定时器，需要实现ActionListener接口，重写actionPerformed方法</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//定义一个食物</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> foodx;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> foody;</span><br><span class=\"line\">    Random random =<span class=\"keyword\">new</span> Random();    <span class=\"comment\">//定义随机数种子</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//构造器</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GamePanel</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        init();</span><br><span class=\"line\">        <span class=\"comment\">//获取键盘的监听事件</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setFocusable(<span class=\"keyword\">true</span>);    <span class=\"comment\">//获取键盘的焦点，使键盘的焦点聚集在游戏上。默认为false</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.addKeyListener(<span class=\"keyword\">this</span>);      <span class=\"comment\">//添加一个监听(实现接口的类————&gt;即当前类)</span></span><br><span class=\"line\">        timer.start();         <span class=\"comment\">//定时器启动，否则运行不了</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//初始化</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        length = <span class=\"number\">3</span>;                            <span class=\"comment\">//初始化蛇的长度，默认为3</span></span><br><span class=\"line\">        score = <span class=\"number\">0</span>;                             <span class=\"comment\">//初始化积分</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">0</span>] = <span class=\"number\">100</span>;    snakeY[<span class=\"number\">0</span>] = <span class=\"number\">100</span>;   <span class=\"comment\">//蛇头的坐标</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">1</span>] = <span class=\"number\">75</span>;    snakeY[<span class=\"number\">1</span>] = <span class=\"number\">100</span>;    <span class=\"comment\">//第一个蛇身的坐标</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">2</span>] = <span class=\"number\">50</span>;    snakeY[<span class=\"number\">2</span>] = <span class=\"number\">100</span>;    <span class=\"comment\">//第一个蛇身的坐标</span></span><br><span class=\"line\">        fx = <span class=\"string\">\"R\"</span>;                               <span class=\"comment\">//蛇头方向，默认为右</span></span><br><span class=\"line\">        foodx = <span class=\"number\">25</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的x坐标</span></span><br><span class=\"line\">        foody = <span class=\"number\">75</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的y坐标</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//绘制积分</span></span><br><span class=\"line\">        g.setColor(Color.white);</span><br><span class=\"line\">        g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">20</span>));</span><br><span class=\"line\">        g.drawString(<span class=\"string\">\"Length\"</span>+length,<span class=\"number\">750</span>,<span class=\"number\">35</span>);</span><br><span class=\"line\">        g.drawString(<span class=\"string\">\"Score\"</span>+score,<span class=\"number\">750</span>,<span class=\"number\">50</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//绘制食物</span></span><br><span class=\"line\">        Data.food.paintIcon(<span class=\"keyword\">this</span>,g,foodx,foody);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//游戏提示：是否开始</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isStart==<span class=\"keyword\">false</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//画一个文字————&gt;String类型</span></span><br><span class=\"line\">            g.setColor(Color.WHITE);    <span class=\"comment\">//设置画笔的颜色</span></span><br><span class=\"line\">            g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">10</span>));       <span class=\"comment\">//设置字体      Font.BOLD:设置为粗体</span></span><br><span class=\"line\">            g.drawString(<span class=\"string\">\"Please enter the Space to start game!\"</span>,<span class=\"number\">300</span>,<span class=\"number\">300</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//失败提示：是否开始</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isFailed)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//画一个文字————&gt;String类型</span></span><br><span class=\"line\">            g.setColor(Color.RED);    <span class=\"comment\">//设置画笔的颜色</span></span><br><span class=\"line\">            g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">10</span>));       <span class=\"comment\">//设置字体      Font.BOLD:设置为粗体</span></span><br><span class=\"line\">            g.drawString(<span class=\"string\">\"Failed! Please enter the Space to Restart game!\"</span>,<span class=\"number\">300</span>,<span class=\"number\">300</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//接收键盘的输入：监听键盘的输入 需实现KeyListener接口并重写keyPressed方法</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//键盘按下并弹起</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">keyTyped</span><span class=\"params\">(KeyEvent e)</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//键盘按下未释放</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">keyPressed</span><span class=\"params\">(KeyEvent e)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//监听按下的是哪个键</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> keyCode = e.getKeyCode();</span><br><span class=\"line\">        <span class=\"comment\">//判断按下的键是否为空格键</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(keyCode==KeyEvent.VK_SPACE)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (isFailed)&#123;</span><br><span class=\"line\">                <span class=\"comment\">//游戏失败</span></span><br><span class=\"line\">                isFailed = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">                init();     <span class=\"comment\">//重新初始化</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">//游戏暂停</span></span><br><span class=\"line\">                isStart = !isStart;     <span class=\"comment\">//对isStart取反而非设置为true————&gt;可以通过空格控制是否刷新</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            repaint();              <span class=\"comment\">//重新绘制界面————&gt;刷新界面</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//方向键控制走向</span></span><br><span class=\"line\">        <span class=\"comment\">//判断按下的方向键</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_LEFT)&#123;</span><br><span class=\"line\">            fx = <span class=\"string\">\"L\"</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_RIGHT)&#123;</span><br><span class=\"line\">            fx = <span class=\"string\">\"R\"</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_UP)&#123;</span><br><span class=\"line\">            fx = <span class=\"string\">\"U\"</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_DOWN)&#123;</span><br><span class=\"line\">            fx = <span class=\"string\">\"D\"</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//释放某个键时</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">keyReleased</span><span class=\"params\">(KeyEvent e)</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//定时器，监听时间：执行定时操作</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent e)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//如果游戏处于开始状态且没有失败</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isStart&amp;&amp;isFailed==<span class=\"keyword\">false</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//身体右移</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = length-<span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">                snakeX[i] = snakeX[i-<span class=\"number\">1</span>];</span><br><span class=\"line\">                snakeY[i] = snakeY[i-<span class=\"number\">1</span>];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//通过方向键控制头部移动</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"R\"</span>)) &#123;</span><br><span class=\"line\">                snakeX[<span class=\"number\">0</span>] = snakeX[<span class=\"number\">0</span>] + <span class=\"number\">25</span>;</span><br><span class=\"line\">                <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]&gt;<span class=\"number\">850</span>)&#123;</span><br><span class=\"line\">                    snakeX[<span class=\"number\">0</span>] = <span class=\"number\">25</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (fx.equals(<span class=\"string\">\"L\"</span>))&#123;</span><br><span class=\"line\">                snakeX[<span class=\"number\">0</span>] = snakeX[<span class=\"number\">0</span>] - <span class=\"number\">25</span>;</span><br><span class=\"line\">                <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]&lt;<span class=\"number\">25</span>)&#123;</span><br><span class=\"line\">                    snakeX[<span class=\"number\">0</span>] = <span class=\"number\">850</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (fx.equals(<span class=\"string\">\"U\"</span>))&#123;</span><br><span class=\"line\">                snakeY[<span class=\"number\">0</span>] = snakeY[<span class=\"number\">0</span>] - <span class=\"number\">25</span>;</span><br><span class=\"line\">                <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(snakeY[<span class=\"number\">0</span>]&lt;<span class=\"number\">75</span>)&#123;</span><br><span class=\"line\">                    snakeY[<span class=\"number\">0</span>] = <span class=\"number\">400</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (fx.equals(<span class=\"string\">\"D\"</span>))&#123;</span><br><span class=\"line\">                snakeY[<span class=\"number\">0</span>] = snakeY[<span class=\"number\">0</span>] + <span class=\"number\">25</span>;</span><br><span class=\"line\">                <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(snakeY[<span class=\"number\">0</span>]&gt;<span class=\"number\">450</span>)&#123;</span><br><span class=\"line\">                    snakeY[<span class=\"number\">0</span>] = <span class=\"number\">75</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//失败判断，小蛇身体坐标与头部坐标重合</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; length ; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(snakeY[<span class=\"number\">0</span>]==snakeY[i]&amp;&amp;snakeX[<span class=\"number\">0</span>]==snakeX[i])&#123;</span><br><span class=\"line\">                    isFailed = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//吃食物</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]==foodx&amp;&amp;snakeY[<span class=\"number\">0</span>]==foody)&#123;</span><br><span class=\"line\">                length++;</span><br><span class=\"line\">                score = score + <span class=\"number\">10</span>;</span><br><span class=\"line\">                <span class=\"comment\">//重新生成食物</span></span><br><span class=\"line\">                foodx = <span class=\"number\">25</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的x坐标</span></span><br><span class=\"line\">                foody = <span class=\"number\">75</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的y坐标</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//刷新界面</span></span><br><span class=\"line\">            repaint();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        timer.start();  <span class=\"comment\">//定时器启动，否则运行不了</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.swing.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.ActionEvent;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.ActionListener;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.KeyListener;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Random;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//JPanel:swing中的面板容器，可以存放任何东西，最后添加到JFrame窗体中</span></span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"2-让蛇动起来————-gt-事件监听和定时器\">2. 让蛇动起来————&gt;事件监听和定时器<a href=\"post/Java贪吃蛇#2-让蛇动起来————-gt-事件监听和定时器\"></a></h2><h3 id=\"2-1-监听键盘的输入——-gt-监听器\">2.1 监听键盘的输入——&gt;监听器<a href=\"post/Java贪吃蛇#2-1-监听键盘的输入——-gt-监听器\"></a></h3><p><strong>接收键盘的输入：监听键盘的输入，需实现KeyListener接口并重写keyPressed方法</strong></p>\n<p>实现KeyListener接口需要重写3个接口，这里只用到了keyPressed方法</p>\n<h4 id=\"2-1-1-使用空格键判断-控制-启动-暂停\">2.1.1 使用空格键判断(控制)启动/暂停<a href=\"post/Java贪吃蛇#2-1-1-使用空格键判断-控制-启动-暂停\"></a></h4><ul>\n<li><p>声明一个变量isStart用来标识游戏的状态(启动/暂停)，默认为false(暂停)</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">boolean</span> isStart = <span class=\"keyword\">false</span>;</span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p>在画板的游戏区域显示提示(绘制提示——&gt;画一个文字)</p>\n<ul>\n<li>设置画笔颜色setColor，传入Color类型的参数</li>\n<li>设置画笔字体setFont，传入Font类型参数</li>\n<li>调用drawString方法</li>\n</ul>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//游戏提示：是否开始</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(isStart==<span class=\"keyword\">false</span>)&#123;\t<span class=\"comment\">//画一个文字————&gt;String类型</span></span><br><span class=\"line\">    <span class=\"comment\">//设置画笔的颜色</span></span><br><span class=\"line\">    g.setColor(Color.WHITE);    </span><br><span class=\"line\">    <span class=\"comment\">//设置字体(Font的三个参数分别为字体名字、字体样式、字体大小)\tFont.BOLD:设置为粗体</span></span><br><span class=\"line\">    g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">10</span>)); </span><br><span class=\"line\">    <span class=\"comment\">//drawString:画一个字符串(参数分别为字符串内容、字符串x坐标、字符串y坐标)</span></span><br><span class=\"line\">    g.drawString(<span class=\"string\">\"Please enter the Space to start game!\"</span>,<span class=\"number\">300</span>,<span class=\"number\">300</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p>重写keyPressed方法</p>\n<ul>\n<li>通过e.getKeyCode()方法监听按下的是哪个键(返回一个int类型)</li>\n<li>判断按下的键是否为空格键(keyCode==KeyEvent.VK_SPACE)</li>\n<li>重新绘制/刷新界面</li>\n</ul>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//键盘按下未释放</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">keyPressed</span><span class=\"params\">(KeyEvent e)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//监听按下的是哪个键</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> keyCode = e.getKeyCode();</span><br><span class=\"line\">    <span class=\"comment\">//判断按下的键是否为空格键</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(keyCode==KeyEvent.VK_SPACE)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//游戏暂停</span></span><br><span class=\"line\">        isStart = !isStart; <span class=\"comment\">//对isStart取反而非设置为true————&gt;可以通过空格控制是否刷新</span></span><br><span class=\"line\">        repaint();          <span class=\"comment\">//重新绘制界面————&gt;刷新界面</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p>在构造器中获取键盘的监听事件(必须，否则键盘监听不到)</p>\n<ul>\n<li>获取键盘的焦点，默认为false(不获取)——&gt;让键盘的焦点聚集在游戏上</li>\n<li>监听当前类的键盘——&gt;对当前类监听</li>\n</ul>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GamePanel</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    init();</span><br><span class=\"line\">    <span class=\"comment\">//获取键盘的监听事件</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setFocusable(<span class=\"keyword\">true</span>);    <span class=\"comment\">//获取键盘的焦点，使键盘的焦点聚集在游戏上。默认为false</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.addKeyListener(<span class=\"keyword\">this</span>);  <span class=\"comment\">//添加一个监听(实现接口的类————&gt;即当前类)</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n</li>\n</ul>\n<p>全部的代码如下：</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.swing.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.KeyEvent;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.KeyListener;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GamePanel</span> <span class=\"keyword\">extends</span> <span class=\"title\">JPanel</span> <span class=\"keyword\">implements</span> <span class=\"title\">KeyListener</span></span>&#123;</span><br><span class=\"line\">    .......</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> isStart = <span class=\"keyword\">false</span>;    \t<span class=\"comment\">//游戏是否开始(用空格键控制)，默认为false</span></span><br><span class=\"line\">\t.......</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//构造器</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GamePanel</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        init();</span><br><span class=\"line\">        <span class=\"comment\">//获取键盘的监听事件</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setFocusable(<span class=\"keyword\">true</span>);    <span class=\"comment\">//获取键盘的焦点，使键盘的焦点聚集在游戏上。默认为false</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.addKeyListener(<span class=\"keyword\">this</span>);  <span class=\"comment\">//添加一个监听(实现接口的类————&gt;即当前类)</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//初始化</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        .......</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//游戏提示：是否开始</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(isStart==<span class=\"keyword\">false</span>)&#123;\t<span class=\"comment\">//画一个文字————&gt;String类型</span></span><br><span class=\"line\">        <span class=\"comment\">//设置画笔的颜色</span></span><br><span class=\"line\">        g.setColor(Color.WHITE);    </span><br><span class=\"line\">        <span class=\"comment\">//设置字体(三个参数分别为字体名字、字体样式、字体大小)\tFont.BOLD:设置为粗体</span></span><br><span class=\"line\">        g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">10</span>)); </span><br><span class=\"line\">        <span class=\"comment\">//drawString:画一个字符串(参数分别为字符串内容、字符串x坐标、字符串y坐标)</span></span><br><span class=\"line\">        g.drawString(<span class=\"string\">\"Please enter the Space to start game!\"</span>,<span class=\"number\">300</span>,<span class=\"number\">300</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//键盘按下未释放</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">keyPressed</span><span class=\"params\">(KeyEvent e)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//监听按下的是哪个键</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> keyCode = e.getKeyCode();</span><br><span class=\"line\">        <span class=\"comment\">//判断按下的键是否为空格键</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(keyCode==KeyEvent.VK_SPACE)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//游戏暂停</span></span><br><span class=\"line\">            isStart = !isStart; <span class=\"comment\">//对isStart取反而非设置为true————&gt;可以通过空格控制是否刷新</span></span><br><span class=\"line\">            repaint();          <span class=\"comment\">//重新绘制界面————&gt;刷新界面</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"2-2-让蛇动起来——-gt-定时器\">2.2 让蛇动起来——&gt;定时器<a href=\"post/Java贪吃蛇#2-2-让蛇动起来——-gt-定时器\"></a></h3><ul>\n<li><p>定义一个Timer类型的变量，参数分别为delay(即<strong>“多少毫秒执行一次”</strong>)和listener(即<strong>“监听的类”</strong>)</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//定时器，需要实现ActionListener接口，重写actionPerformed方法</span></span><br><span class=\"line\">Timer timer = <span class=\"keyword\">new</span> Timer(<span class=\"number\">100</span>,<span class=\"keyword\">this</span>);</span><br></pre></td></tr></table></div></figure>\n</li>\n<li><p>实现ActionListener接口，重写actionPerformed方法</p>\n<ul>\n<li>先判断游戏是否处于开始状态</li>\n<li>让小蛇移动</li>\n<li>刷新界面</li>\n<li>添加timer.start()语句，启动定时器</li>\n</ul>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//定时器，监听时间：执行定时操作</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent e)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//如果游戏处于开始状态</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isStart)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//身体移动</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = length-<span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;\t<span class=\"comment\">//除了头部，身体前移一个单位</span></span><br><span class=\"line\">            snakeX[i] = snakeX[i-<span class=\"number\">1</span>];</span><br><span class=\"line\">            snakeY[i] = snakeY[i-<span class=\"number\">1</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//头部移动</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">0</span>] = snakeX[<span class=\"number\">0</span>] + <span class=\"number\">25</span>;</span><br><span class=\"line\">        <span class=\"comment\">//刷新界面</span></span><br><span class=\"line\">        repaint();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    timer.start();  <span class=\"comment\">//定时器启动，否则运行时小蛇动不了</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n\n</li>\n</ul>\n<ul>\n<li><p>必须在构造器中添加timer.start()语句，启动定时器(否则不会调用Timer定时器)</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//构造器</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GamePanel</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    init();</span><br><span class=\"line\">    <span class=\"comment\">//获取键盘的监听事件</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setFocusable(<span class=\"keyword\">true</span>);    <span class=\"comment\">//获取键盘的焦点，使键盘的焦点聚集在游戏上。默认为false</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.addKeyListener(<span class=\"keyword\">this</span>);  <span class=\"comment\">//添加一个监听(实现接口的类————&gt;即当前类)</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//定时器启动，否则运行不了</span></span><br><span class=\"line\">    timer.start();         \t\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n</li>\n</ul>\n<h3 id=\"2-3-边界判断优化\">2.3 边界判断优化<a href=\"post/Java贪吃蛇#2-3-边界判断优化\"></a></h3><p>添加边界判断，当小蛇移动到边界时从另一边界重新出现。</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//定时器，监听时间：执行定时操作</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent e)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//如果游戏处于开始状态</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isStart)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//身体移动</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = length-<span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;\t<span class=\"comment\">//除了头部，身体前移一个单位</span></span><br><span class=\"line\">            snakeX[i] = snakeX[i-<span class=\"number\">1</span>];</span><br><span class=\"line\">            snakeY[i] = snakeY[i-<span class=\"number\">1</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//头部移动</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">0</span>] = snakeX[<span class=\"number\">0</span>] + <span class=\"number\">25</span>;</span><br><span class=\"line\">        <span class=\"comment\">//边界判断</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]&gt;<span class=\"number\">850</span>)&#123;</span><br><span class=\"line\">            snakeX[<span class=\"number\">0</span>] = <span class=\"number\">25</span>;\t\t\t<span class=\"comment\">//&lt;————————————————————————新增代码</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//刷新界面</span></span><br><span class=\"line\">        repaint();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    timer.start();  <span class=\"comment\">//定时器启动，否则运行时小蛇动不了</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"2-4-键盘控制走向优化\">2.4 键盘控制走向优化<a href=\"post/Java贪吃蛇#2-4-键盘控制走向优化\"></a></h3><p>需要修改两个地方</p>\n<ul>\n<li>键盘监听</li>\n<li>定时器</li>\n</ul>\n<h4 id=\"2-4-1-键盘监听\">2.4.1 键盘监听<a href=\"post/Java贪吃蛇#2-4-1-键盘监听\"></a></h4><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//键盘按下未释放</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">keyPressed</span><span class=\"params\">(KeyEvent e)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//监听按下的是哪个键</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> keyCode = e.getKeyCode();</span><br><span class=\"line\">    <span class=\"comment\">//判断按下的键是否为空格键</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(keyCode==KeyEvent.VK_SPACE)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//游戏暂停</span></span><br><span class=\"line\">        isStart = !isStart; <span class=\"comment\">//对isStart取反而非设置为true————&gt;可以通过空格控制是否刷新</span></span><br><span class=\"line\">        repaint();          <span class=\"comment\">//重新绘制界面————&gt;刷新界面</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//方向键控制走向</span></span><br><span class=\"line\">    <span class=\"comment\">//判断按下的方向键</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_LEFT)&#123;</span><br><span class=\"line\">        fx = <span class=\"string\">\"L\"</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_RIGHT)&#123;</span><br><span class=\"line\">        fx = <span class=\"string\">\"R\"</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_UP)&#123;</span><br><span class=\"line\">        fx = <span class=\"string\">\"U\"</span>;</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_DOWN)&#123;</span><br><span class=\"line\">        fx = <span class=\"string\">\"D\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"2-4-2-定时器\">2.4.2 定时器<a href=\"post/Java贪吃蛇#2-4-2-定时器\"></a></h4><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//定时器，监听时间：执行定时操作</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent e)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//如果游戏处于开始状态</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isStart)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//身体移动</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = length-<span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;\t<span class=\"comment\">//除了头部，身体前移一个单位</span></span><br><span class=\"line\">            snakeX[i] = snakeX[i-<span class=\"number\">1</span>];</span><br><span class=\"line\">            snakeY[i] = snakeY[i-<span class=\"number\">1</span>];</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">\t\t<span class=\"comment\">//通过方向键控制头部移动</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"R\"</span>)) &#123;</span><br><span class=\"line\">            snakeX[<span class=\"number\">0</span>] = snakeX[<span class=\"number\">0</span>] + <span class=\"number\">25</span>;</span><br><span class=\"line\">            <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]&gt;<span class=\"number\">850</span>)&#123;</span><br><span class=\"line\">                snakeX[<span class=\"number\">0</span>] = <span class=\"number\">25</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (fx.equals(<span class=\"string\">\"L\"</span>))&#123;</span><br><span class=\"line\">            snakeX[<span class=\"number\">0</span>] = snakeX[<span class=\"number\">0</span>] - <span class=\"number\">25</span>;</span><br><span class=\"line\">            <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]&lt;<span class=\"number\">25</span>)&#123;</span><br><span class=\"line\">                snakeX[<span class=\"number\">0</span>] = <span class=\"number\">850</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (fx.equals(<span class=\"string\">\"U\"</span>))&#123;</span><br><span class=\"line\">            snakeY[<span class=\"number\">0</span>] = snakeY[<span class=\"number\">0</span>] - <span class=\"number\">25</span>;</span><br><span class=\"line\">            <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(snakeY[<span class=\"number\">0</span>]&lt;<span class=\"number\">75</span>)&#123;</span><br><span class=\"line\">                snakeY[<span class=\"number\">0</span>] = <span class=\"number\">400</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (fx.equals(<span class=\"string\">\"D\"</span>))&#123;</span><br><span class=\"line\">            snakeY[<span class=\"number\">0</span>] = snakeY[<span class=\"number\">0</span>] + <span class=\"number\">25</span>;</span><br><span class=\"line\">            <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(snakeY[<span class=\"number\">0</span>]&gt;<span class=\"number\">450</span>)&#123;</span><br><span class=\"line\">                snakeY[<span class=\"number\">0</span>] = <span class=\"number\">75</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//刷新界面</span></span><br><span class=\"line\">        repaint();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    timer.start();  <span class=\"comment\">//定时器启动，否则运行时小蛇动不了</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"3-程序结构\">3. 程序结构<a href=\"post/Java贪吃蛇#3-程序结构\"></a></h2><p>程序结构分为四个部分：</p>\n<ul>\n<li><strong>初始化</strong></li>\n<li><strong>画板</strong></li>\n<li><strong>监听器</strong></li>\n<li><strong>定时器</strong></li>\n</ul>\n<p>当添加功能时，只需在上述部分中实现相对于的代码即可</p>\n<h2 id=\"4-吃食物\">4. 吃食物<a href=\"post/Java贪吃蛇#4-吃食物\"></a></h2><blockquote>\n<ul>\n<li><p><strong>在初始化中定义食物</strong></p>\n</li>\n<li><p><strong>将食物添加到面板中</strong></p>\n</li>\n<li><p><strong>监听是否吃到食物</strong></p>\n</li>\n<li><p><strong>若吃到食物，则蛇长度加1</strong></p>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"4-1-定义食物\">4.1 定义食物<a href=\"post/Java贪吃蛇#4-1-定义食物\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GamePanel</span> <span class=\"keyword\">extends</span> <span class=\"title\">JPanel</span> <span class=\"keyword\">implements</span> <span class=\"title\">KeyListener</span>, <span class=\"title\">ActionListener</span> </span>&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">    <span class=\"comment\">//定义一个食物</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> foodx;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> foody;</span><br><span class=\"line\">    Random random =<span class=\"keyword\">new</span> Random();    <span class=\"comment\">//定义随机数种子,食物随机产生</span></span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"4-2-初始化中定义食物\">4.2 初始化中定义食物<a href=\"post/Java贪吃蛇#4-2-初始化中定义食物\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//初始化</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    foodx = <span class=\"number\">25</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的x坐标</span></span><br><span class=\"line\">    foody = <span class=\"number\">75</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的y坐标</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">foodx = <span class=\"number\">25</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);\t<span class=\"comment\">//因为游戏界面的坐标是从25开始，使食物出现在游戏界面内</span></span><br><span class=\"line\">foody = <span class=\"number\">75</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>); \t<span class=\"comment\">//同上</span></span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"4-3-将食物画到面板上\">4.3 将食物画到面板上<a href=\"post/Java贪吃蛇#4-3-将食物画到面板上\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*实现画板功能 需要重写父类的paintComponent方法</span></span><br><span class=\"line\"><span class=\"comment\">  Graphics g : 作画的画笔</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">paintComponent</span><span class=\"params\">(Graphics g)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//绘制积分</span></span><br><span class=\"line\">    g.setColor(Color.white);</span><br><span class=\"line\">    g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">20</span>));</span><br><span class=\"line\">    g.drawString(<span class=\"string\">\"Length\"</span>+length,<span class=\"number\">750</span>,<span class=\"number\">35</span>);</span><br><span class=\"line\">    g.drawString(<span class=\"string\">\"Score\"</span>+score,<span class=\"number\">750</span>,<span class=\"number\">50</span>);</span><br><span class=\"line\">\t......</span><br><span class=\"line\">    <span class=\"comment\">//绘制食物</span></span><br><span class=\"line\">    Data.food.paintIcon(<span class=\"keyword\">this</span>,g,foodx,foody);</span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"4-4-在定时器中监听-与键盘动作无关\">4.4 在定时器中监听(与键盘动作无关)<a href=\"post/Java贪吃蛇#4-4-在定时器中监听-与键盘动作无关\"></a></h3><p>如果小蛇的头部与食物坐标重合，则小蛇长度加1且重新在游戏区域中随机生成食物</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//定时器，监听时间：执行定时操作</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent e)</span> </span>&#123;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">\t<span class=\"comment\">//如果游戏处于开始状态</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isStart)&#123;</span><br><span class=\"line\">    \t<span class=\"comment\">//身体移动</span></span><br><span class=\"line\">        ......</span><br><span class=\"line\">        <span class=\"comment\">//吃食物</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]==foodx&amp;&amp;snakeY[<span class=\"number\">0</span>]==foody)&#123;</span><br><span class=\"line\">            length++;</span><br><span class=\"line\">            <span class=\"comment\">//重新生成食物</span></span><br><span class=\"line\">            foodx = <span class=\"number\">25</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的x坐标</span></span><br><span class=\"line\">            foody = <span class=\"number\">75</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的y坐标</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//刷新界面</span></span><br><span class=\"line\">        repaint();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\ttimer.start();  <span class=\"comment\">//定时器启动，否则运行不了</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"5-失败判定\">5. 失败判定<a href=\"post/Java贪吃蛇#5-失败判定\"></a></h2><blockquote>\n<ul>\n<li><p><strong>定义变量标识失败</strong>()</p>\n</li>\n<li><p><strong>将失败添加到面板中</strong></p>\n</li>\n<li><p><strong>监听是否失败</strong></p>\n</li>\n</ul>\n</blockquote>\n<h3 id=\"5-1-定义变量标识失败\">5.1 定义变量标识失败<a href=\"post/Java贪吃蛇#5-1-定义变量标识失败\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GamePanel</span> <span class=\"keyword\">extends</span> <span class=\"title\">JPanel</span> <span class=\"keyword\">implements</span> <span class=\"title\">KeyListener</span>, <span class=\"title\">ActionListener</span> </span>&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">    <span class=\"comment\">//定义失败标识符</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> isFailed = <span class=\"keyword\">false</span>;   <span class=\"comment\">//游戏是否失败(用空格键控制)，默认为false</span></span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"5-2-将失败提示添加到画板中\">5.2 将失败提示添加到画板中<a href=\"post/Java贪吃蛇#5-2-将失败提示添加到画板中\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*实现画板功能 需要重写父类的paintComponent方法</span></span><br><span class=\"line\"><span class=\"comment\">  Graphics g : 作画的画笔</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">paintComponent</span><span class=\"params\">(Graphics g)</span> </span>&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">    <span class=\"comment\">//绘制失败提示</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(isFailed)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//画一个文字————&gt;String类型</span></span><br><span class=\"line\">        g.setColor(Color.RED);    <span class=\"comment\">//设置画笔的颜色</span></span><br><span class=\"line\">        g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">10</span>));   <span class=\"comment\">//设置字体      Font.BOLD:设置为粗体</span></span><br><span class=\"line\">        g.drawString(<span class=\"string\">\"Failed! Please enter the Space to Restart game!\"</span>,<span class=\"number\">300</span>,<span class=\"number\">300</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<p>PS:类似开始提示</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//游戏提示：是否开始</span></span><br><span class=\"line\"><span class=\"keyword\">if</span>(isStart==<span class=\"keyword\">false</span>)&#123;</span><br><span class=\"line\">    <span class=\"comment\">//画一个文字————&gt;String类型</span></span><br><span class=\"line\">    g.setColor(Color.WHITE);    <span class=\"comment\">//设置画笔的颜色</span></span><br><span class=\"line\">    g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">10</span>));   <span class=\"comment\">//设置字体    Font.BOLD:设置为粗体</span></span><br><span class=\"line\">    g.drawString(<span class=\"string\">\"Please enter the Space to start game!\"</span>,<span class=\"number\">300</span>,<span class=\"number\">300</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"5-3-在监听器中监听失败-空格参与\">5.3 在监听器中监听失败(空格参与)<a href=\"post/Java贪吃蛇#5-3-在监听器中监听失败-空格参与\"></a></h3><p>同2.1.1</p>\n<p><strong>此时需要判断当空格按下时是暂停还是失败后重新开始！</strong></p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//键盘按下未释放</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">keyPressed</span><span class=\"params\">(KeyEvent e)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//监听按下的是哪个键</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> keyCode = e.getKeyCode();</span><br><span class=\"line\">    <span class=\"comment\">//判断按下的键是否为空格键</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(keyCode==KeyEvent.VK_SPACE)&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isFailed)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//游戏失败,重新开始</span></span><br><span class=\"line\">            isFailed = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            init();     <span class=\"comment\">//重新初始化</span></span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">//游戏暂停</span></span><br><span class=\"line\">            isStart = !isStart;     <span class=\"comment\">//对isStart取反而非设置为true————&gt;可以通过空格控制是否刷新</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        repaint();              <span class=\"comment\">//重新绘制界面————&gt;刷新界面</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"5-4-定时器\">5.4 定时器<a href=\"post/Java贪吃蛇#5-4-定时器\"></a></h3><p>修改2.2中的代码</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//定时器，监听时间：执行定时操作</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent e)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//如果游戏处于开始状态且没有失败</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isStart&amp;&amp;isFailed==<span class=\"keyword\">false</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">//身体右移</span></span><br><span class=\"line\">        ......</span><br><span class=\"line\">        <span class=\"comment\">//通过方向键控制头部移动</span></span><br><span class=\"line\">        ......</span><br><span class=\"line\">        <span class=\"comment\">//失败判断，小蛇身体坐标与头部坐标重合</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; length ; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span>(snakeY[<span class=\"number\">0</span>]==snakeY[i]&amp;&amp;snakeX[<span class=\"number\">0</span>]==snakeX[i])&#123;</span><br><span class=\"line\">                isFailed = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//刷新界面</span></span><br><span class=\"line\">        repaint();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    timer.start();  <span class=\"comment\">//定时器启动，否则运行不了</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"6-积分系统\">6. 积分系统<a href=\"post/Java贪吃蛇#6-积分系统\"></a></h2><blockquote>\n<ul>\n<li><strong>定义变量标识积分</strong></li>\n<li><strong>初始化积分</strong></li>\n<li><strong>将积分板块添加到画板中</strong></li>\n<li><strong>在定时器中监听</strong></li>\n</ul>\n</blockquote>\n<h3 id=\"6-1定义变量标识积分\">6.1定义变量标识积分<a href=\"post/Java贪吃蛇#6-1定义变量标识积分\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GamePanel</span> <span class=\"keyword\">extends</span> <span class=\"title\">JPanel</span> <span class=\"keyword\">implements</span> <span class=\"title\">KeyListener</span>, <span class=\"title\">ActionListener</span> </span>&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">    <span class=\"keyword\">int</span> score;  <span class=\"comment\">//定义积分</span></span><br><span class=\"line\">\t......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"6-2-初始化积分\">6.2 初始化积分<a href=\"post/Java贪吃蛇#6-2-初始化积分\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//初始化</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">\t......</span><br><span class=\"line\">    score = <span class=\"number\">0</span>;                             <span class=\"comment\">//初始化积分</span></span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"6-3-将积分板块添加到画板中\">6.3 将积分板块添加到画板中<a href=\"post/Java贪吃蛇#6-3-将积分板块添加到画板中\"></a></h3><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*实现画板功能 需要重写父类的paintComponent方法</span></span><br><span class=\"line\"><span class=\"comment\">  Graphics g : 作画的画笔</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">paintComponent</span><span class=\"params\">(Graphics g)</span> </span>&#123;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    <span class=\"comment\">//绘制积分</span></span><br><span class=\"line\">    g.setColor(Color.white);</span><br><span class=\"line\">    g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">20</span>));</span><br><span class=\"line\">    g.drawString(<span class=\"string\">\"Score\"</span>+score,<span class=\"number\">750</span>,<span class=\"number\">50</span>);</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"6-4-在定时器中监听\">6.4 在定时器中监听<a href=\"post/Java贪吃蛇#6-4-在定时器中监听\"></a></h3><p>修改4.4中代码，吃到食物时分数增加。</p>\n<figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//定时器，监听时间：执行定时操作</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent e)</span> </span>&#123;      </span><br><span class=\"line\">    <span class=\"comment\">//如果游戏处于开始状态且没有失败</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isStart&amp;&amp;isFailed==<span class=\"keyword\">false</span>)&#123;</span><br><span class=\"line\">\t\t......</span><br><span class=\"line\">        <span class=\"comment\">//吃食物</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]==foodx&amp;&amp;snakeY[<span class=\"number\">0</span>]==foody)&#123;</span><br><span class=\"line\">            length++;</span><br><span class=\"line\">            score = score + <span class=\"number\">10</span>;</span><br><span class=\"line\">            <span class=\"comment\">//重新生成食物</span></span><br><span class=\"line\">            foodx = <span class=\"number\">25</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的x坐标</span></span><br><span class=\"line\">            foody = <span class=\"number\">75</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的y坐标</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        ......</span><br><span class=\"line\">        <span class=\"comment\">//刷新界面</span></span><br><span class=\"line\">        repaint();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    timer.start();  <span class=\"comment\">//定时器启动，否则运行不了</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h2 id=\"7-打包发布\">7. 打包发布<a href=\"post/Java贪吃蛇#7-打包发布\"></a></h2><h3 id=\"7-1-全部代码\">7.1 全部代码<a href=\"post/Java贪吃蛇#7-1-全部代码\"></a></h3><h4 id=\"7-1-1-SnakeGame\">7.1.1 SnakeGame<a href=\"post/Java贪吃蛇#7-1-1-SnakeGame\"></a></h4><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.swing.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StartGame</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//1.绘制一个静态窗口JFrame</span></span><br><span class=\"line\">        JFrame jFrame = <span class=\"keyword\">new</span> JFrame(<span class=\"string\">\"SnakeGame\"</span>);</span><br><span class=\"line\">        <span class=\"comment\">/*设置界面大小</span></span><br><span class=\"line\"><span class=\"comment\">          x y : 距离屏幕左上角的坐标</span></span><br><span class=\"line\"><span class=\"comment\">          width height : 界面的宽和高</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">        jFrame.setBounds(<span class=\"number\">10</span>,<span class=\"number\">10</span>,<span class=\"number\">905</span>,<span class=\"number\">600</span>);</span><br><span class=\"line\">        <span class=\"comment\">//设置窗口大小 false——&gt;不可改变 true——&gt;可改变</span></span><br><span class=\"line\">        jFrame.setResizable(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">        <span class=\"comment\">//设置关闭事件，游戏关闭程序就会停止。若不设置，游戏关闭程序仍旧运行</span></span><br><span class=\"line\">        jFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class=\"line\">        <span class=\"comment\">//2.绘制面板(面板上才可以画画)JPanel 可以添加到JFrame窗体中</span></span><br><span class=\"line\">        jFrame.add(<span class=\"keyword\">new</span> GamePanel());    <span class=\"comment\">//将自定义的面板添加进JFrame窗体里</span></span><br><span class=\"line\">        <span class=\"comment\">//3.设置窗口是否可见 true——&gt;可见 false——&gt;不可见</span></span><br><span class=\"line\">        jFrame.setVisible(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"7-1-2GamePanel\">7.1.2GamePanel<a href=\"post/Java贪吃蛇#7-1-2GamePanel\"></a></h4><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> javax.swing.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.ActionEvent;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.ActionListener;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.KeyEvent;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.awt.event.KeyListener;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Random;</span><br><span class=\"line\"><span class=\"comment\">//JPanel:swing中的面板容器，可以存放任何东西，最后添加到JFrame窗体中</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GamePanel</span> <span class=\"keyword\">extends</span> <span class=\"title\">JPanel</span> <span class=\"keyword\">implements</span> <span class=\"title\">KeyListener</span>, <span class=\"title\">ActionListener</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> length; <span class=\"comment\">//定义蛇的长度</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> score;  <span class=\"comment\">//定义积分</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] snakeX = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">600</span>];    <span class=\"comment\">//蛇的X坐标</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] snakeY = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">500</span>];    <span class=\"comment\">//蛇的Y坐标</span></span><br><span class=\"line\">    String fx;                <span class=\"comment\">//蛇头方向</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> isStart = <span class=\"keyword\">false</span>;    <span class=\"comment\">//游戏是否开始(用空格键控制)，默认为false</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> isFailed = <span class=\"keyword\">false</span>;   <span class=\"comment\">//游戏是否失败(用空格键控制)，默认为false</span></span><br><span class=\"line\">    <span class=\"comment\">//定时器，需要实现ActionListener接口，重写actionPerformed方法</span></span><br><span class=\"line\">    Timer timer = <span class=\"keyword\">new</span> Timer(<span class=\"number\">100</span>,<span class=\"keyword\">this</span>);      </span><br><span class=\"line\">    <span class=\"comment\">//定义一个食物</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> foodx;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> foody;</span><br><span class=\"line\">    Random random =<span class=\"keyword\">new</span> Random();    <span class=\"comment\">//定义随机数种子</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//构造器</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GamePanel</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        init();</span><br><span class=\"line\">        <span class=\"comment\">//获取键盘的监听事件</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setFocusable(<span class=\"keyword\">true</span>);    <span class=\"comment\">//获取键盘的焦点，使键盘的焦点聚集在游戏上。默认为false</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.addKeyListener(<span class=\"keyword\">this</span>);      <span class=\"comment\">//添加一个监听(实现接口的类————&gt;即当前类)</span></span><br><span class=\"line\">        timer.start();         <span class=\"comment\">//定时器启动，否则运行不了</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">//初始化</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">init</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        length = <span class=\"number\">3</span>;                            <span class=\"comment\">//初始化蛇的长度，默认为3</span></span><br><span class=\"line\">        score = <span class=\"number\">0</span>;                             <span class=\"comment\">//初始化积分</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">0</span>] = <span class=\"number\">100</span>;    snakeY[<span class=\"number\">0</span>] = <span class=\"number\">100</span>;   <span class=\"comment\">//蛇头的坐标</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">1</span>] = <span class=\"number\">75</span>;    snakeY[<span class=\"number\">1</span>] = <span class=\"number\">100</span>;    <span class=\"comment\">//第一个蛇身的坐标</span></span><br><span class=\"line\">        snakeX[<span class=\"number\">2</span>] = <span class=\"number\">50</span>;    snakeY[<span class=\"number\">2</span>] = <span class=\"number\">100</span>;    <span class=\"comment\">//第一个蛇身的坐标</span></span><br><span class=\"line\">        fx = <span class=\"string\">\"R\"</span>;                               <span class=\"comment\">//蛇头方向，默认为右</span></span><br><span class=\"line\">        foodx = <span class=\"number\">25</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的x坐标</span></span><br><span class=\"line\">        foody = <span class=\"number\">75</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的y坐标</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//画板</span></span><br><span class=\"line\">    <span class=\"comment\">/*实现画板功能 需要重写父类的paintComponent方法</span></span><br><span class=\"line\"><span class=\"comment\">      Graphics g : 作画的画笔</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">paintComponent</span><span class=\"params\">(Graphics g)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.paintComponent(g);    <span class=\"comment\">//清屏</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.setBackground(Color.white);    <span class=\"comment\">//设置面板背景色</span></span><br><span class=\"line\">        <span class=\"comment\">//绘制头部广告栏</span></span><br><span class=\"line\">        <span class=\"comment\">/*通过paintIcon方法拿到图片</span></span><br><span class=\"line\"><span class=\"comment\">          component:画到哪个组件中</span></span><br><span class=\"line\"><span class=\"comment\">          graphics:画笔</span></span><br><span class=\"line\"><span class=\"comment\">          x y :画的位置</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">        Data.header.paintIcon(<span class=\"keyword\">this</span>,g,<span class=\"number\">25</span>,<span class=\"number\">11</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//绘制游戏区域</span></span><br><span class=\"line\">        g.fillRect(<span class=\"number\">25</span>,<span class=\"number\">75</span>,<span class=\"number\">850</span>,<span class=\"number\">400</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">/*绘制静态蛇</span></span><br><span class=\"line\"><span class=\"comment\">        Data.right.paintIcon(this,g,snakeX[0],snakeY[0]);   //绘制头部</span></span><br><span class=\"line\"><span class=\"comment\">        Data.body.paintIcon(this,g,snakeX[1],snakeY[1]);    //绘制第一节身体</span></span><br><span class=\"line\"><span class=\"comment\">        Data.body.paintIcon(this,g,snakeX[2],snakeY[2]);    //绘制第二节身体</span></span><br><span class=\"line\"><span class=\"comment\">        */</span></span><br><span class=\"line\">        <span class=\"comment\">//绘制静态蛇————————&gt;优化</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"R\"</span>))&#123;</span><br><span class=\"line\">            Data.right.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">0</span>],snakeY[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"L\"</span>))&#123;</span><br><span class=\"line\">            Data.left.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">0</span>],snakeY[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"U\"</span>))&#123;</span><br><span class=\"line\">            Data.up.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">0</span>],snakeY[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"D\"</span>))&#123;</span><br><span class=\"line\">            Data.down.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[<span class=\"number\">0</span>],snakeY[<span class=\"number\">0</span>]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt;length; i++) &#123;</span><br><span class=\"line\">            Data.body.paintIcon(<span class=\"keyword\">this</span>,g,snakeX[i],snakeY[i]);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//绘制积分</span></span><br><span class=\"line\">        g.setColor(Color.white);</span><br><span class=\"line\">        g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">20</span>));</span><br><span class=\"line\">        g.drawString(<span class=\"string\">\"Length\"</span>+length,<span class=\"number\">750</span>,<span class=\"number\">35</span>);</span><br><span class=\"line\">        g.drawString(<span class=\"string\">\"Score\"</span>+score,<span class=\"number\">750</span>,<span class=\"number\">50</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//绘制食物</span></span><br><span class=\"line\">        Data.food.paintIcon(<span class=\"keyword\">this</span>,g,foodx,foody);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//游戏提示：是否开始</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isStart==<span class=\"keyword\">false</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//画一个文字————&gt;String类型</span></span><br><span class=\"line\">            g.setColor(Color.WHITE);    <span class=\"comment\">//设置画笔的颜色</span></span><br><span class=\"line\">            g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">10</span>));       <span class=\"comment\">//设置字体      Font.BOLD:设置为粗体</span></span><br><span class=\"line\">            g.drawString(<span class=\"string\">\"Please enter the Space to start game!\"</span>,<span class=\"number\">300</span>,<span class=\"number\">300</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//失败提示：是否开始</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(isFailed)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//画一个文字————&gt;String类型</span></span><br><span class=\"line\">            g.setColor(Color.RED);    <span class=\"comment\">//设置画笔的颜色</span></span><br><span class=\"line\">            g.setFont(<span class=\"keyword\">new</span> Font(<span class=\"string\">\"微软雅黑\"</span>,Font.BOLD,<span class=\"number\">10</span>));       <span class=\"comment\">//设置字体      Font.BOLD:设置为粗体</span></span><br><span class=\"line\">            g.drawString(<span class=\"string\">\"Failed! Please enter the Space to Restart game!\"</span>,<span class=\"number\">300</span>,<span class=\"number\">300</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//接收键盘的输入：监听键盘的输入 需实现KeyListener接口并重写keyPressed方法</span></span><br><span class=\"line\">    <span class=\"comment\">//键盘按下并弹起(用不到)</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">keyTyped</span><span class=\"params\">(KeyEvent e)</span> </span>&#123;&#125;</span><br><span class=\"line\">    <span class=\"comment\">//键盘按下未释放</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">keyPressed</span><span class=\"params\">(KeyEvent e)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//监听按下的是哪个键</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> keyCode = e.getKeyCode();</span><br><span class=\"line\">        <span class=\"comment\">//判断按下的键是否为空格键</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span>(keyCode==KeyEvent.VK_SPACE)&#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (isFailed)&#123;\t\t\t<span class=\"comment\">//游戏失败</span></span><br><span class=\"line\">                isFailed = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">                init();     \t\t<span class=\"comment\">//重新初始化</span></span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> &#123;\t\t\t\t\t<span class=\"comment\">//游戏暂停</span></span><br><span class=\"line\">                isStart = !isStart; <span class=\"comment\">//对isStart取反而非设置为true————&gt;可以通过空格控制是否刷新</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            repaint();              <span class=\"comment\">//重新绘制界面————&gt;刷新界面</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">//方向键控制走向</span></span><br><span class=\"line\">        <span class=\"comment\">//判断按下的方向键</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_LEFT)&#123;</span><br><span class=\"line\">            fx = <span class=\"string\">\"L\"</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_RIGHT)&#123;</span><br><span class=\"line\">            fx = <span class=\"string\">\"R\"</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_UP)&#123;</span><br><span class=\"line\">            fx = <span class=\"string\">\"U\"</span>;</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (keyCode==KeyEvent.VK_DOWN)&#123;</span><br><span class=\"line\">            fx = <span class=\"string\">\"D\"</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">//释放某个键时(用不到)</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">keyReleased</span><span class=\"params\">(KeyEvent e)</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">//定时器，监听时间：执行定时操作</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent e)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//如果游戏处于开始状态且没有失败</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isStart&amp;&amp;isFailed==<span class=\"keyword\">false</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//身体右移</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = length-<span class=\"number\">1</span>; i &gt; <span class=\"number\">0</span>; i--) &#123;</span><br><span class=\"line\">                snakeX[i] = snakeX[i-<span class=\"number\">1</span>];</span><br><span class=\"line\">                snakeY[i] = snakeY[i-<span class=\"number\">1</span>];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//通过方向键控制头部移动</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(fx.equals(<span class=\"string\">\"R\"</span>)) &#123;</span><br><span class=\"line\">                snakeX[<span class=\"number\">0</span>] = snakeX[<span class=\"number\">0</span>] + <span class=\"number\">25</span>;</span><br><span class=\"line\">                <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]&gt;<span class=\"number\">850</span>)&#123;</span><br><span class=\"line\">                    snakeX[<span class=\"number\">0</span>] = <span class=\"number\">25</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (fx.equals(<span class=\"string\">\"L\"</span>))&#123;</span><br><span class=\"line\">                snakeX[<span class=\"number\">0</span>] = snakeX[<span class=\"number\">0</span>] - <span class=\"number\">25</span>;</span><br><span class=\"line\">                <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]&lt;<span class=\"number\">25</span>)&#123;</span><br><span class=\"line\">                    snakeX[<span class=\"number\">0</span>] = <span class=\"number\">850</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (fx.equals(<span class=\"string\">\"U\"</span>))&#123;</span><br><span class=\"line\">                snakeY[<span class=\"number\">0</span>] = snakeY[<span class=\"number\">0</span>] - <span class=\"number\">25</span>;</span><br><span class=\"line\">                <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(snakeY[<span class=\"number\">0</span>]&lt;<span class=\"number\">75</span>)&#123;</span><br><span class=\"line\">                    snakeY[<span class=\"number\">0</span>] = <span class=\"number\">400</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (fx.equals(<span class=\"string\">\"D\"</span>))&#123;</span><br><span class=\"line\">                snakeY[<span class=\"number\">0</span>] = snakeY[<span class=\"number\">0</span>] + <span class=\"number\">25</span>;</span><br><span class=\"line\">                <span class=\"comment\">//设置边界</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(snakeY[<span class=\"number\">0</span>]&gt;<span class=\"number\">450</span>)&#123;</span><br><span class=\"line\">                    snakeY[<span class=\"number\">0</span>] = <span class=\"number\">75</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//失败判断，小蛇身体坐标与头部坐标重合</span></span><br><span class=\"line\">            <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">1</span>; i &lt; length ; i++) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span>(snakeY[<span class=\"number\">0</span>]==snakeY[i]&amp;&amp;snakeX[<span class=\"number\">0</span>]==snakeX[i])&#123;</span><br><span class=\"line\">                    isFailed = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">//吃食物</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span>(snakeX[<span class=\"number\">0</span>]==foodx&amp;&amp;snakeY[<span class=\"number\">0</span>]==foody)&#123;</span><br><span class=\"line\">                length++;</span><br><span class=\"line\">                score = score + <span class=\"number\">10</span>;</span><br><span class=\"line\">                <span class=\"comment\">//重新生成食物</span></span><br><span class=\"line\">                foodx = <span class=\"number\">25</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的x坐标</span></span><br><span class=\"line\">                foody = <span class=\"number\">75</span> + <span class=\"number\">25</span> * random.nextInt(<span class=\"number\">15</span>);       <span class=\"comment\">//初始化食物的y坐标</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"comment\">//刷新界面</span></span><br><span class=\"line\">            repaint();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        timer.start();  <span class=\"comment\">//定时器启动，否则运行不了</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h4 id=\"7-1-3-Data\">7.1.3 Data<a href=\"post/Java贪吃蛇#7-1-3-Data\"></a></h4><figure class=\"highlight java\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//用于存放程序需要的数据</span></span><br><span class=\"line\"><span class=\"keyword\">import</span> javax.swing.*;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.net.URL;</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Data</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">//存放图片  URL:定位图片位置  ImageIcon:保存图片</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL headerURL = Data.class.getResource(<span class=\"string\">\"/statics/header.png\"</span>);<span class=\"comment\">//相对路径,相对src目录下</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon header = <span class=\"keyword\">new</span> ImageIcon(headerURL);</span><br><span class=\"line\">    <span class=\"comment\">//存放头部图片</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL upHead = Data.class.getResource(<span class=\"string\">\"/statics/up.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL downHead = Data.class.getResource(<span class=\"string\">\"/statics/down.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL leftHead = Data.class.getResource(<span class=\"string\">\"/statics/left.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL rightHead = Data.class.getResource(<span class=\"string\">\"/statics/right.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon up = <span class=\"keyword\">new</span> ImageIcon(upHead);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon down = <span class=\"keyword\">new</span> ImageIcon(downHead);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon left = <span class=\"keyword\">new</span> ImageIcon(leftHead);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon right = <span class=\"keyword\">new</span> ImageIcon(rightHead);</span><br><span class=\"line\">    <span class=\"comment\">//存放身体图片</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL bodyURL = Data.class.getResource(<span class=\"string\">\"/statics/body.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon body = <span class=\"keyword\">new</span> ImageIcon(bodyURL);</span><br><span class=\"line\">    <span class=\"comment\">//存放食物图片</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> URL foodURL = Data.class.getResource(<span class=\"string\">\"/statics/food.png\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> ImageIcon food = <span class=\"keyword\">new</span> ImageIcon(foodURL);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></div></figure>\n\n<h3 id=\"7-2-打包发布\">7.2 打包发布<a href=\"post/Java贪吃蛇#7-2-打包发布\"></a></h3>","next":{"title":"IDEA添加jar包方式","link":"post/IDEA添加jar包方式"},"plink":"http://YIzzzzz.github.io/post/Java贪吃蛇/","toc":[{"title":"Java贪吃蛇小游戏","id":"Java贪吃蛇小游戏","index":"1","children":[{"title":"1. 静态页面绘制————&gt;GUI","id":"1-静态页面绘制————-gt-GUI","index":"1.1","children":[{"title":"1.1 用JFrame绘制静态窗口","id":"1-1-用JFrame绘制静态窗口","index":"1.1.1"},{"title":"1.2 用JPanel绘制面板","id":"1-2-用JPanel绘制面板","index":"1.1.2"},{"title":"1.3 将面板添加到窗体中","id":"1-3-将面板添加到窗体中","index":"1.1.3"},{"title":"1.4 在GamePanel绘制头部广告栏","id":"1-4-在GamePanel绘制头部广告栏","index":"1.1.4"},{"title":"1.5 在GamePanel中绘制游戏区域(矩形)","id":"1-5-在GamePanel中绘制游戏区域-矩形","index":"1.1.5"},{"title":"1.6 在GamePanel中绘制一条静态小蛇","id":"1-6-在GamePanel中绘制一条静态小蛇","index":"1.1.6"},{"title":"1.7 在GamePanel中绘制一条静态小蛇的优化","id":"1-7-在GamePanel中绘制一条静态小蛇的优化","index":"1.1.7"}]},{"title":"2. 让蛇动起来————&gt;事件监听和定时器","id":"2-让蛇动起来————-gt-事件监听和定时器","index":"1.2","children":[{"title":"2.1 监听键盘的输入——&gt;监听器","id":"2-1-监听键盘的输入——-gt-监听器","index":"1.2.1"},{"title":"2.2 让蛇动起来——&gt;定时器","id":"2-2-让蛇动起来——-gt-定时器","index":"1.2.2"},{"title":"2.3 边界判断优化","id":"2-3-边界判断优化","index":"1.2.3"},{"title":"2.4 键盘控制走向优化","id":"2-4-键盘控制走向优化","index":"1.2.4"}]},{"title":"3. 程序结构","id":"3-程序结构","index":"1.3"},{"title":"4. 吃食物","id":"4-吃食物","index":"1.4","children":[{"title":"4.1 定义食物","id":"4-1-定义食物","index":"1.4.1"},{"title":"4.2 初始化中定义食物","id":"4-2-初始化中定义食物","index":"1.4.2"},{"title":"4.3 将食物画到面板上","id":"4-3-将食物画到面板上","index":"1.4.3"},{"title":"4.4 在定时器中监听(与键盘动作无关)","id":"4-4-在定时器中监听-与键盘动作无关","index":"1.4.4"}]},{"title":"5. 失败判定","id":"5-失败判定","index":"1.5","children":[{"title":"5.1 定义变量标识失败","id":"5-1-定义变量标识失败","index":"1.5.1"},{"title":"5.2 将失败提示添加到画板中","id":"5-2-将失败提示添加到画板中","index":"1.5.2"},{"title":"5.3 在监听器中监听失败(空格参与)","id":"5-3-在监听器中监听失败-空格参与","index":"1.5.3"},{"title":"5.4 定时器","id":"5-4-定时器","index":"1.5.4"}]},{"title":"6. 积分系统","id":"6-积分系统","index":"1.6","children":[{"title":"6.1定义变量标识积分","id":"6-1定义变量标识积分","index":"1.6.1"},{"title":"6.2 初始化积分","id":"6-2-初始化积分","index":"1.6.2"},{"title":"6.3 将积分板块添加到画板中","id":"6-3-将积分板块添加到画板中","index":"1.6.3"},{"title":"6.4 在定时器中监听","id":"6-4-在定时器中监听","index":"1.6.4"}]},{"title":"7. 打包发布","id":"7-打包发布","index":"1.7","children":[{"title":"7.1 全部代码","id":"7-1-全部代码","index":"1.7.1"},{"title":"7.2 打包发布","id":"7-2-打包发布","index":"1.7.2"}]}]}]}